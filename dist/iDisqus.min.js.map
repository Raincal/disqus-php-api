{"version":3,"sources":["webpack://[name]/webpack/universalModuleDefinition","webpack://[name]/webpack/bootstrap","webpack://[name]/(webpack)/buildin/module.js","webpack://[name]/./src/iDisqus.js","webpack://[name]/./index.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","webpackPolyfill","deprecate","paths","children","__WEBPACK_AMD_DEFINE_RESULT__","global","ElementProto","document","localStorage","scripts","lasturl","length","src","isEdge","substring","lastIndexOf","navigator","userAgent","indexOf","isIE","ActiveXObject","getAjax","url","success","error","xhr","XMLHttpRequest","open","encodeURI","onreadystatechange","readyState","status","responseText","onerror","withCredentials","send","postAjax","data","params","keys","map","k","encodeURIComponent","join","setRequestHeader","Element","matches","msMatchesSelector","mozMatchesSelector","webkitMatchesSelector","selector","elements","this","ownerDocument","querySelectorAll","index","Boolean","closest","element","nodeType","parentNode","User","dom","arguments","opts","init","autologin","_","getItem","email","avatar","type","logged_in","boxarr","getElementsByClassName","forEach","item","querySelector","classList","add","remove","dataset","setItem","api","resp","JSON","parse","code","submit","response","login","timer","popup","setInterval","closed","clearInterval","user","logout","removeItem","iDisqus","getElementById","slice","site","location","origin","optsUrl","replace","pathname","search","identifier","link","title","slug","desc","content","mode","timeout","toggle","autoCreate","auto","emojiPath","emoji_path","emojiList","emoji_list","unicode","emoji_preview","emojiPreview","eac","stat","current","loaded","loading","editing","offsetTop","thread","next","message","mediaHtml","count","users","imageSize","disqusLoaded","disqus_config","page","callbacks","onReady","push","disabled","checked","addEventListener","handle","timeAgo","templates","prefix","suffix","seconds","minute","minutes","hour","hours","day","days","month","months","year","years","template","t","Math","abs","round","time","Date","getTime","$this","getAttribute","innerHTML","setTimeout","bind","box","outerHTML","loadMore","post","postThread","show","upload","verify","jump","mention","keySelect","field","focus","input","disqus","getlist","style","display","DISQUS","reset","tip","createElement","forum","timestamp","now","onload","head","body","appendChild","ontimeout","abort","addListener","els","evt","func","el","removeListener","removeEventListener","addAllListeners","counts","qty","commentArr","disqusUrl","href","itemLink","posts","disqusCount","console","log","popular","postsHtml","documentElement","scrollTop","badge","moderatorBadgeText","loadmore","load","parent","unshift","id","cursor","hasPrev","hasNext","scrollTo","test","hash","scrollBy","getBoundingClientRect","top","create","alert","parentPostDom","username","parentPost","insert","isPost","mediaHTML","media","html","isMod","createdAt","isDeleted","insertAdjacentHTML","postEdit","e","postData","currentTarget","clearTimeout","edit","wrapper","contains","textarea","selStart","selectionStart","mentionIndex","mentionText","mentionDom","keyCode","showUsers","filter","re","RegExp","coord","getCaretCoord","list","left","setSelectionRange","carPos","selectionEnd","div","span","copyStyle","getComputedStyle","prop","position","textContent","substr","coords","parseFloat","lineHeight","offsetLeft","scrollLeft","removeChild","preventDefault","previousSibling","nextSibling","history","replaceState","undefined","shortCode","cancel","className","commentBox","errorTips","file","form","progress","alertmsg","files","size","width","FormData","append","$item","filename","xhrUpload","imageUrl","image","Image","ceil","total","imageItem","imageArr","Text","Dom","idisqus","errorDom","errorHtml","parentId","imgArr","mediaStr","currentId","elName","elEmail","elUrl","alertClear","preMessage","match","emojiShort","toJSON","click","mentions","reEdit","target","reload","destroy","config"],"mappings":"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","file":"iDisqus.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"iDisqus\"] = factory();\n\telse\n\t\troot[\"iDisqus\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","module.exports = function(module) {\r\n\tif (!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tif (!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, \"loaded\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"id\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n","/*!\n * v 0.2.11\n * \n * https://github.com/fooleap/disqus-php-api\n *\n * Copyright 2017-2018 fooleap\n * Released under the MIT license\n */\n(function (global) {\n    'use strict';\n\n    var d = document,\n        l = localStorage,\n        scripts = d.scripts,\n        lasturl = scripts[scripts.length - 1].src,\n        filepath = lasturl.substring(0, lasturl.lastIndexOf('/')),\n        isEdge = navigator.userAgent.indexOf(\"Edge\") > -1,\n        isIE = !!window.ActiveXObject || \"ActiveXObject\" in window;\n\n    function getLocation(href) {\n        var link = d.createElement('a');\n        link.href = href;\n        return link;\n    }\n\n    function getAjax(url, success, error) {\n        var xhr = new XMLHttpRequest();\n        xhr.open ('GET', encodeURI(url));\n        xhr.onreadystatechange = function() {\n            if (xhr.readyState == 4 && xhr.status == 200) {\n                success(xhr.responseText);\n            }\n        }\n        xhr.onerror = error;\n        xhr.withCredentials = true;\n        xhr.send();\n        return xhr;\n    }\n    \n    function postAjax(url, data, success, error) {\n        var params = typeof data == 'string' ? data : Object.keys(data).map(\n            function(k){ return encodeURIComponent(k) + '=' + encodeURIComponent(data[k]) }\n        ).join('&');\n\n        var xhr = new XMLHttpRequest();\n        xhr.open('POST', url);\n        xhr.onreadystatechange = function() {\n            if (xhr.readyState == 4 && xhr.status == 200) {\n                success(xhr.responseText); \n            }\n        };\n        xhr.onerror = error; \n        xhr.withCredentials = true;\n        xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n        xhr.send(params);\n        return xhr;\n    }\n    \n    // matches & closest polyfill https://github.com/jonathantneal/closest\n    (function (ElementProto) {\n        if (typeof ElementProto.matches !== 'function') {\n            ElementProto.matches = ElementProto.msMatchesSelector || ElementProto.mozMatchesSelector || ElementProto.webkitMatchesSelector || function matches(selector) {\n                var element = this;\n                var elements = (element.document || element.ownerDocument).querySelectorAll(selector);\n                var index = 0;\n\n                while (elements[index] && elements[index] !== element) {\n                    ++index;\n                }\n\n                return Boolean(elements[index]);\n            };\n        }\n\n        if (typeof ElementProto.closest !== 'function') {\n            ElementProto.closest = function closest(selector) {\n                var element = this;\n\n                while (element && element.nodeType === 1) {\n                    if (element.matches(selector)) {\n                        return element;\n                    }\n\n                    element = element.parentNode;\n                }\n\n                return null;\n            };\n        }\n    })(window.Element.prototype);\n\n    // 访客信息\n    var User = function () {\n        this.dom = arguments[0];\n        this.opts = arguments[1];\n        this.init();\n        this.autologin();\n    }\n\n    User.prototype = {\n        // 初始化访客信息\n        init: function(){\n            var _ = this;\n            // 读取访客信息\n            _.name = l.getItem('name');\n            _.email = l.getItem('email');\n            _.url = l.getItem('url');\n            _.avatar = l.getItem('avatar');\n            _.type = l.getItem('type');\n            _.logged_in = l.getItem('logged_in');\n\n            var boxarr = _.dom.getElementsByClassName('comment-box');\n            if( _.logged_in == 'true' ) {\n                [].forEach.call(boxarr,function(item){\n                    if(_.type == '1'){\n                        item.querySelector('.comment-form-wrapper').classList.add('logged-in');\n                    }\n                    item.querySelector('.comment-form-name').value = _.name;\n                    item.querySelector('.comment-form-email').value = _.email;\n                    item.querySelector('.comment-form-url').value = _.url;\n                    item.querySelector('.comment-avatar-image').src = _.avatar;\n                });\n            } else {\n                [].forEach.call(boxarr,function(item){\n                    item.querySelector('.comment-form-wrapper').classList.remove('logged-in');\n                    item.querySelector('.comment-form-name').value = '';\n                    item.querySelector('.comment-form-email').value = '';\n                    item.querySelector('.comment-form-url').value = '';\n                    item.querySelector('.comment-avatar-image').src = _.dom.querySelector('.comment-avatar-image').dataset.avatar;\n                });\n                l.setItem('logged_in', 'false');\n            }\n        },\n\n        // 自动登录\n        autologin: function(){\n            var _ = this;\n            getAjax( _.opts.api +'/user.php', function(resp){\n                var data = JSON.parse(resp);\n                if( data.code == 0 ){\n                    _.submit(data.response);\n                } else {\n                    if( _.type == '1' ){\n                        l.setItem('logged_in', 'false');\n                        _.init();\n                    }\n                }\n            }, function(){\n            })\n        },\n\n        // 登录\n        login: function(){\n\n            var _ = this;\n            var popup = window.open(_.opts.api+'/login.php', 'Disqus Oauth', 'width=470,height=508');\n            var timer;\n            function isLogged(){\n                if (!popup || !popup.closed) return;\n                clearInterval(timer);\n                _.user.autologin();\n            }\n            timer = setInterval(isLogged, 100);\n\n        },\n\n        // 退出登录\n        logout: function(){\n            var _ = this;\n            postAjax( _.opts.api + '/logout.php', {}, function(resp){\n                l.setItem('logged_in', 'false');\n                l.removeItem('type');\n                l.removeItem('email');\n                l.removeItem('avatar');\n                l.removeItem('name');\n                l.removeItem('url');\n                _.user.init();\n            })\n        },\n\n        // 提交访客信息\n        submit: function(user){\n            l.setItem('email', user.email);\n            l.setItem('type', user.type);\n            l.setItem('name', user.name);\n            l.setItem('url', user.url);\n            l.setItem('avatar', user.avatar);\n            l.setItem('logged_in', 'true');\n            this.init();\n        }\n    }\n\n    var iDisqus = function () {\n        var _ = this;\n\n        // 配置\n        _.opts = typeof(arguments[1]) == 'object' ? arguments[1] : arguments[0];\n        _.dom =  d.getElementById(typeof(arguments[0]) == 'string' ? arguments[0] : 'comment');\n        _.opts.api = _.opts.api.slice(-1) == '/' ? _.opts.api.slice(0,-1) : _.opts.api;\n        _.opts.site = _.opts.site || location.origin;\n        if(!!_.opts.url){\n            var optsUrl = _.opts.url.replace(_.opts.site, '');\n            _.opts.url = optsUrl.slice(0, 1) != '/' ? '/' + optsUrl : optsUrl;\n        } else if(isEdge || isIE) {\n            _.opts.url = encodeURI(location.pathname) + encodeURI(location.search);\n        } else {\n            _.opts.url = location.pathname + location.search;\n        }\n        _.opts.identifier = _.opts.identifier || _.opts.url;\n        _.opts.link = _.opts.site + _.opts.url; \n        _.opts.title = _.opts.title || d.title;\n        _.opts.slug = !!_.opts.slug ? _.opts.slug.replace(/[^A-Za-z0-9_-]+/g,'') : '';\n        _.opts.desc =  _.opts.desc || (!!d.querySelector('[name=\"description\"]') ? d.querySelector('[name=\"description\"]').content : '');\n        _.opts.mode = _.opts.mode || 1;\n        _.opts.timeout = _.opts.timeout || 3000;\n        _.opts.toggle = !!_.opts.toggle ? d.getElementById(_.opts.toggle) : null;\n        _.opts.autoCreate = !!_.opts.autoCreate || !!_.opts.auto;\n\n        // emoji 表情\n        _.opts.emojiPath = _.opts.emojiPath || _.opts.emoji_path || 'https://assets-cdn.github.com/images/icons/emoji/unicode/';\n        _.emojiList = _.opts.emojiList || _.opts.emoji_list || [{\n            code:'smile',\n            title:'笑脸',\n            unicode:'1f604'\n        },{\n            code:'mask',\n            title:'生病',\n            unicode:'1f637'\n        },{\n            code:'joy',\n            title:'破涕为笑',\n            unicode:'1f602'\n        },{\n            code:'stuck_out_tongue_closed_eyes',\n            title:'吐舌',\n            unicode:'1f61d'\n        },{\n            code:'flushed',\n            title:'脸红',\n            unicode:'1f633'\n        },{\n            code:'scream',\n            title:'恐惧',\n            unicode:'1f631'\n        },{\n            code:'pensive',\n            title:'失望',\n            unicode:'1f614'\n        },{\n            code:'unamused',\n            title:'无语',\n            unicode:'1f612'\n        },{\n            code:'grin',\n            title:'露齿笑',\n            unicode:'1f601'\n        },{\n            code:'heart_eyes',\n            title:'色',\n            unicode:'1f60d'\n        },{\n            code:'sweat',\n            title:'汗',\n            unicode:'1f613'\n        },{\n            code:'smirk',\n            title:'得意',\n            unicode:'1f60f'\n        },{\n            code:'relieved',\n            title:'满意',\n            unicode:'1f60c'\n        },{\n            code:'rolling_eyes',\n            title:'翻白眼',\n            unicode:'1f644'\n        },{\n            code:'ok_hand',\n            title:'OK',\n            unicode:'1f44c'\n        },{\n            code:'v',\n            title:'胜利',\n            unicode:'270c'\n        }];\n        \n        if(!!_.opts.emoji_preview || !!_.opts.emojiPreview ){\n            getAjax(_.opts.api +'/eac.min.php', function(resp){\n                _.eac = JSON.parse(resp);\n            }, function(){\n            })\n        }\n\n        // 默认状态\n        _.stat = {\n            current: 'idisqus', // 当前显示评论框\n            loaded: false,      // 评论框已加载\n            loading: false,     // 评论加载中\n            editing: false,     // 评论编辑中\n            offsetTop: 0,       // 高度位置\n            thread: null,       // 本页 thread id\n            next: null,         // 下条评论\n            message: null,      // 新评论\n            mediaHtml: null,    // 新上传图片\n            root: [],           // 根评论\n            count: 0,           // 评论数\n            users: [],          // Disqus 会员\n            imageSize: [],      // 已上传图片大小\n            disqusLoaded: false // Disqus 已加载\n        };\n\n        // Disqus 评论框设置\n        window.disqus_config = function () {\n            this.page.identifier = _.opts.identifier;\n            this.page.title = _.opts.title;\n            this.page.url = _.opts.link;\n            this.callbacks.onReady.push(function() {\n                _.stat.current = 'disqus';\n                _.stat.disqusLoaded = true;\n                if( _.opts.mode == 3 && !!_.opts.toggle) {\n                    _.opts.toggle.disabled = '';\n                    _.opts.toggle.checked = true;\n                    _.opts.toggle.addEventListener('change', _.handle.toggle, false);\n                }\n            });\n        }\n\n        // 自动初始化\n        if( !!_.opts.init ){\n            _.init();\n            //console.log(_);\n        }\n    }\n\n    // TimeAgo https://coderwall.com/p/uub3pw/javascript-timeago-func-e-g-8-hours-ago\n    iDisqus.prototype.timeAgo = function() {\n\n        var _ = this;\n        var templates = {\n            prefix: \"\",\n            suffix: \"前\",\n            seconds: \"几秒\",\n            minute: \"1分钟\",\n            minutes: \"%d分钟\",\n            hour: \"1小时\",\n            hours: \"%d小时\",\n            day: \"1天\",\n            days: \"%d天\",\n            month: \"1个月\",\n            months: \"%d个月\",\n            year: \"1年\",\n            years: \"%d年\"\n        };\n        var template = function (t, n) {\n            return templates[t] && templates[t].replace(/%d/i, Math.abs(Math.round(n)));\n        };\n\n        var timer = function (time) {\n            if (!time) return;\n            time = time.replace(/\\.\\d+/, \"\"); // remove milliseconds\n            time = time.replace(/-/, \"/\").replace(/-/, \"/\");\n            time = time.replace(/T/, \" \").replace(/Z/, \" UTC\");\n            time = time.replace(/([\\+\\-]\\d\\d)\\:?(\\d\\d)/, \" $1$2\"); // -04:00 -> -0400\n            time = new Date(time * 1000 || time);\n\n            var now = new Date();\n            var seconds = ((now.getTime() - time) * .001) >> 0;\n            var minutes = seconds / 60;\n            var hours = minutes / 60;\n            var days = hours / 24;\n            var years = days / 365;\n\n            return templates.prefix + ( seconds < 45 && template('seconds', seconds) || seconds < 90 && template('minute', 1) || minutes < 45 && template('minutes', minutes) || minutes < 90 && template('hour', 1) || hours < 24 && template('hours', hours) || hours < 42 && template('day', 1) || days < 30 && template('days', days) || days < 45 && template('month', 1) || days < 365 && template('months', days / 30) || years < 1.5 && template('year', 1) || template('years', years)) + templates.suffix;\n        };\n\n        var elements = _.dom.querySelectorAll('.comment-item-time');\n        for (var i in elements) {\n            var $this = elements[i];\n            if (typeof $this === 'object') {\n                $this.title = new Date($this.getAttribute('datetime'));\n                $this.innerHTML = timer($this.getAttribute('datetime'));\n            }\n        }\n\n        // update time every minute\n        setTimeout(_.timeAgo.bind(_), 60000);\n\n    }\n\n    // 初始化评论框\n    iDisqus.prototype.init = function(){\n        var _ = this;\n        if(!_.dom){\n            //console.log('该页面没有评论框！');\n            return\n        }\n        // 表情\n        var emojiList = '';\n        _.emojiList.forEach(function(item){\n            emojiList += '<li class=\"emojione-item\" title=\"'+ item.title+'\" data-code=\":'+item.code+':\"><img class=\"emojione-item-image\" src=\"'+_.opts.emojiPath + item.unicode+'.png\" /></li>';\n        })\n        _.dom.innerHTML = '<div class=\"comment loading\" id=\"idisqus\">\\n'+\n            '    <div class=\"loading-container\" data-tip=\"正在加载评论……\"><svg class=\"loading-bg\" width=\"72\" height=\"72\" viewBox=\"0 0 720 720\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"><path class=\"ring\" fill=\"none\" stroke=\"#9d9ea1\" d=\"M 0 -260 A 260 260 0 1 1 -80 -260\" transform=\"translate(400,400)\" stroke-width=\"50\" /><polygon transform=\"translate(305,20)\" points=\"50,0 0,100 18,145 50,82 92,145 100,100\" style=\"fill:#9d9ea1\"/></svg></div>\\n'+\n            '    <div class=\"comment-header\"><span class=\"comment-header-item\" id=\"comment-count\">评论</span><a target=\"_blank\" class=\"comment-header-item\" id=\"comment-link\">Disqus 讨论区</a></div>\\n'+\n            '    <div class=\"comment-box\">\\n'+\n            '        <div class=\"comment-avatar avatar\"><img class=\"comment-avatar-image\" src=\"//a.disquscdn.com/images/noavatar92.png\" data-avatar=\"//a.disquscdn.com/images/noavatar92.png\"></div>\\n'+\n            '        <div class=\"comment-form\">\\n'+\n            '            <div class=\"comment-form-wrapper\">\\n'+\n            '                <textarea class=\"comment-form-textarea\" placeholder=\"加入讨论……\"></textarea>\\n'+\n            '                <div class=\"comment-form-alert\"></div>\\n'+\n            '                <div class=\"comment-image\">\\n'+\n            '                    <ul class=\"comment-image-list\"></ul>\\n'+\n            '                    <div class=\"comment-image-progress\">\\n'+\n            '                        <div class=\"comment-image-loaded\"></div>\\n'+\n            '                    </div>\\n'+\n            '                </div>\\n'+\n            '                <div class=\"comment-actions\">\\n'+\n            '                    <div class=\"comment-actions-group\">\\n'+\n            '                        <input id=\"emoji-input\" class=\"comment-actions-input\" type=\"checkbox\"> \\n'+\n            '                        <label class=\"comment-actions-label emojione\" for=\"emoji-input\">\\n'+\n            '                            <svg class=\"icon\" fill=\"#c2c6cc\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"200\" height=\"200\">\\n'+\n            '                                <g>\\n'+\n            '                                <title>选择表情</title>\\n'+\n            '                                <path d=\"M512 1024c-282.713043 0-512-229.286957-512-512s229.286957-512 512-512c282.713043 0 512 229.286957 512 512S792.486957 1024 512 1024zM512 44.521739c-258.226087 0-467.478261 209.252174-467.478261 467.478261 0 258.226087 209.252174 467.478261 467.478261 467.478261s467.478261-209.252174 467.478261-467.478261C979.478261 253.773913 768 44.521739 512 44.521739z\"></path>\\n'+\n            '                                <path d=\"M801.391304 554.295652c0 160.278261-129.113043 289.391304-289.391304 289.391304s-289.391304-129.113043-289.391304-289.391304L801.391304 554.295652z\"></path>\\n'+\n            '                                <path d=\"M674.504348 349.495652m-57.878261 0a2.6 2.6 0 1 0 115.756522 0 2.6 2.6 0 1 0-115.756522 0Z\"></path>\\n'+\n            '                                <path d=\"M347.269565 349.495652m-57.878261 0a2.6 2.6 0 1 0 115.756522 0 2.6 2.6 0 1 0-115.756522 0Z\"></path>\\n'+\n            '                                </g>\\n'+\n            '                            </svg>\\n'+\n            '                            <ul class=\"emojione-list\">'+emojiList+'</ul>\\n'+\n            '                        </label>\\n'+\n            '                        <input id=\"upload-input\" class=\"comment-actions-input comment-image-input\" type=\"file\" accept=\"image/*\" name=\"file\"> \\n'+\n            '                        <label class=\"comment-actions-label\" for=\"upload-input\">\\n'+\n            '                            <svg class=\"icon\" fill=\"#c2c6cc\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"200\" height=\"200\">\\n'+\n            '                                <g>\\n'+\n            '                                <title>上传图片</title>\\n'+\n            '                                <path d=\"M15.515152 15.515152 15.515152 15.515152 15.515152 15.515152Z\"></path>\\n'+\n            '                                <path d=\"M15.515152 139.636364l0 806.787879 992.969697 0 0-806.787879-992.969697 0zM946.424242 884.363636l-868.848485 0 0-682.666667 868.848485 0 0 682.666667zM698.181818 356.848485c0-51.417212 41.673697-93.090909 93.090909-93.090909s93.090909 41.673697 93.090909 93.090909c0 51.417212-41.673697 93.090909-93.090909 93.090909s-93.090909-41.673697-93.090909-93.090909zM884.363636 822.30303l-744.727273 0 186.181818-496.484848 248.242424 310.30303 124.121212-93.090909z\"></path>\\n'+\n            '                                </g>\\n'+\n            '                            </svg>\\n'+\n            '                        </label>\\n'+\n            '                    </div>\\n'+\n            '                    <div class=\"comment-actions-form\">\\n'+\n            '                        <label class=\"comment-actions-label exit\" title=\"退出登录\">\\n'+\n            '                            <svg class=\"icon\" fill=\"#c2c6cc\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"48\" height=\"48\">\\n'+\n            '                                <path d=\"M348.870666 210.685443l378.570081 0c32.8205 0 58.683541 26.561959 58.683541 58.683541 0 162.043606 0 324.804551 0 486.848157 0 32.81129-26.561959 58.674331-58.683541 58.674331L348.870666 814.891472c-10.477632 0-18.850323-8.363482-18.850323-18.841114l0-37.728276c0-10.477632 8.372691-18.841114 18.850323-18.841114l343.645664 0c10.477632 0 18.850323-8.372691 18.850323-18.850323L711.366653 304.983109c0-10.477632-8.372691-18.841114-18.850323-18.841114L348.870666 286.141996c-10.477632 0-18.850323-8.363482-18.850323-18.841114l0-37.728276C329.98248 219.095997 338.393034 210.685443 348.870666 210.685443z\"></path>\\n'+\n            '                                <path d=\"M128.152728 526.436804l112.450095 112.450095c6.985088 6.985088 19.567661 6.985088 26.552749 0l26.561959-26.561959c6.985088-6.985088 6.985088-19.567661 0-26.552749l-34.925441-34.925441L494.168889 550.84675c10.477632 0 18.850323-8.372691 18.850323-18.850323l0-37.719066c0-10.477632-8.372691-18.850323-18.850323-18.850323L258.754229 475.427036l34.925441-34.925441c6.985088-6.985088 6.985088-19.567661 0-26.552749l-26.561959-26.524097c-6.985088-6.985088-19.567661-6.985088-26.552749 0L128.152728 499.875868C120.431883 506.859933 120.431883 519.451716 128.152728 526.436804z\"></path>\\n'+\n            '                            </svg>\\n'+\n            '                        </label>\\n'+\n            '                        <button class=\"comment-form-submit\">\\n'+\n            '                            <svg class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"200\" height=\"200\">\\n'+\n            '                                <path d=\"M565.747623 792.837176l260.819261 112.921839 126.910435-845.424882L66.087673 581.973678l232.843092 109.933785 562.612725-511.653099-451.697589 563.616588-5.996574 239.832274L565.747623 792.837176z\" fill=\"#ffffff\"></path>\\n'+\n            '                            </svg>\\n'+\n            '                        </button>\\n'+\n            '                    </div>\\n'+\n            '                </div>\\n'+\n            '            </div>\\n'+\n            '            <div class=\"comment-form-user\">'+ ( _.opts.mode != 1 ? '<div class=\"comment-form-auth\"><button class=\"comment-form-login\" title=\"使用 Disqus 帐号登录\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" viewBox=\"0 0 200 200\"><path fill=\"#2E9FFF\" d=\"M102.535 167.5c-16.518 0-31.621-6.036-43.298-16.021L30.5 155.405l11.102-27.401A67.658 67.658 0 0 1 35.564 100c0-37.277 29.984-67.5 66.971-67.5 36.984 0 66.965 30.223 66.965 67.5 0 37.284-29.98 67.5-66.965 67.5zm36.567-67.693v-.188c0-19.478-13.736-33.367-37.42-33.367h-25.58v67.5h25.201c23.868.001 37.799-14.468 37.799-33.945zm-37.138 17.361h-7.482V82.841h7.482c10.989 0 18.283 6.265 18.283 17.07v.188c0 10.896-7.294 17.069-18.283 17.069z\"/></svg></button></div><span> 或 </span>' : '' ) + '<div class=\"comment-form-guest\"><input class=\"comment-form-input comment-form-name\" type=\"text\" name=\"name\" placeholder=\"名字（必填）\" autocomplete=\"name\"><input class=\"comment-form-input comment-form-email\" type=\"email\" name=\"email\" placeholder=\"邮箱（必填）\" autocomplete=\"email\"><input class=\"comment-form-input comment-form-url\" type=\"url\" name=\"url\" placeholder=\"网址（可选）\" autocomplete=\"url\"></div></div>\\n'+\n            '        </div>\\n'+\n            '    </div>\\n'+\n            '    <ul id=\"comments\" class=\"comment-list\"></ul>\\n'+\n            '    <a href=\"javascript:;\" class=\"comment-loadmore\">加载更多</a>\\n'+\n            '</div>\\n'+\n            '<div class=\"comment\" id=\"disqus_thread\"></div>';\n\n        _.user = new User(_.dom,_.opts);\n        _.box = _.dom.querySelector('.comment-box').outerHTML.replace(/<label class=\"comment-actions-label exit\"(.|\\n)*<\\/label>\\n/,'').replace('comment-form-wrapper','comment-form-wrapper editing').replace(/加入讨论……/,'');\n        _.handle = {\n            logout: _.user.logout.bind(_),\n            login: _.user.login.bind(_),\n            loadMore: _.loadMore.bind(_),\n            post: _.post.bind(_),\n            postThread: _.postThread.bind(_),\n            remove: _.remove.bind(_),\n            show: _.show.bind(_),\n            toggle: _.toggle.bind(_),\n            upload: _.upload.bind(_),\n            verify: _.verify.bind(_),\n            jump: _.jump.bind(_),\n            mention: _.mention.bind(_),\n            keySelect: _.keySelect.bind(_),\n            field: _.field,\n            focus: _.focus,\n            input: _.input\n        };\n\n        switch(_.opts.mode){\n            case 1:\n                _.disqus();\n                break;\n            case 2: \n                _.getlist();\n                break;\n            case 3: \n                _.getlist();\n                _.disqus();\n                break;\n            default:\n                _.disqus();\n                break;\n        }\n    }\n\n    // 切换评论框\n    iDisqus.prototype.toggle = function(){\n        var _ = this;\n        if( _.stat.current == 'disqus' ){\n            _.stat.current = 'idisqus';\n            _.dom.querySelector('#idisqus').style.display = 'block';\n            _.dom.querySelector('#disqus_thread').style.display = 'none';\n        } else {\n            _.disqus();\n        }\n    }\n\n    // 加载 Disqus 评论\n    iDisqus.prototype.disqus = function(){\n        if (typeof DISQUS === 'object') {\n            this.reset();\n            this.stat.disqusLoaded = true;\n        }\n\n        var _ = this;\n        var _tip = _.dom.querySelector('.loading-container').dataset.tip;\n        if(_.opts.site != location.origin){\n            //console.log('本地环境不加载 Disqus 评论框！');\n            if( _.opts.mode == 1 ){\n                _.getlist();\n            }\n            return;\n        }\n        if(!_.stat.disqusLoaded ){\n            _tip = '尝试连接 Disqus……';\n\n            var s = d.createElement('script');\n            s.src = '//'+_.opts.forum+'.disqus.com/embed.js';\n            s.dataset.timestamp = Date.now();\n            s.onload = function(){\n                _.dom.querySelector('#idisqus').style.display = 'none';\n                _.stat.disqusLoaded = true;\n                _tip = '连接成功，加载 Disqus 评论框……'\n            } \n            s.onerror = function(){\n                if( _.opts.mode == 1){\n                    _tip = '连接失败，加载简易评论框……';\n                    _.getlist();\n                }\n            }\n\n            var xhr = new XMLHttpRequest();\n            xhr.open('GET', '//disqus.com/next/config.json?' + Date.now(), true);\n            xhr.timeout = _.opts.timeout;\n            xhr.onreadystatechange = function () {\n                if (xhr.readyState == 4 && xhr.status == 200) {\n                    (d.head || d.body).appendChild(s);\n                }\n            }\n            xhr.ontimeout = function () {\n                xhr.abort();\n                if( _.opts.mode == 1){\n                    _tip = '连接超时，加载简易评论框……';\n                    _.getlist();\n                }\n            }\n            xhr.onerror = function() {\n                if( _.opts.mode == 1){\n                    _tip = '连接失败，加载简易评论框……';\n                    _.getlist();\n                }\n            }\n            xhr.send();\n        } else {\n            _.stat.current = 'disqus';\n            _.dom.querySelector('#idisqus').style.display = 'none';\n            _.dom.querySelector('#disqus_thread').style.display = 'block';\n        }\n    }\n\n    // 添加事件监听\n    iDisqus.prototype.addListener = function (els, evt, func){\n        var _ = this;\n        var el = _.dom.getElementsByClassName(els);\n        [].forEach.call(el, function(item){\n            item.addEventListener(evt, func, false);\n        });\n    }\n\n    // 移除事件监听\n    iDisqus.prototype.removeListener = function (els, evt, func){\n        var _ = this;\n        var el = _.dom.getElementsByClassName(els);\n        [].forEach.call(el, function(item){\n            item.removeEventListener(evt, func, false);\n        });\n    }\n\n    // 添加所有事件监听\n    iDisqus.prototype.addAllListeners = function (){\n        var _ = this;\n        _.addListener('exit', 'click', _.handle.logout);\n        _.addListener('comment-form-textarea', 'blur',  _.handle.focus);\n        _.addListener('comment-form-textarea', 'focus',  _.handle.focus);\n        _.addListener('comment-form-textarea', 'input',  _.handle.input);\n        _.addListener('comment-form-textarea', 'keyup',  _.handle.mention);\n        _.addListener('comment-form-email', 'blur',  _.handle.verify);\n        _.addListener('comment-form-submit', 'click',  _.handle.post);\n        _.addListener('comment-form-login', 'click',  _.handle.login);\n        _.addListener('comment-image-input', 'change',  _.handle.upload);\n        _.addListener('emojione-item', 'click', _.handle.field);\n    }\n\n    // 评论计数\n    iDisqus.prototype.count = function (){\n        var _ = this;\n        var counts = d.querySelectorAll('[data-disqus-url]');\n        var qty = counts.length;\n        if(qty > 0){\n            var commentArr = [];\n            for( var i = 0; i < qty; i++){\n                commentArr[i] = counts[i].dataset.disqusUrl.replace(_.opts.site, '');\n            }\n            getAjax(\n                _.opts.api + '/count.php?links=' + commentArr.join(','), \n                function(resp) {\n                    var data  = JSON.parse(resp);\n                    var posts = data.response;\n                    posts.forEach(function(item){\n                        var link = document.createElement('a');\n                        link.href = item.link;\n                        var itemLink = link.href.replace(link.origin, '');\n                        var el = d.querySelector('[data-disqus-url$=\"'+itemLink+'\"]')\n                        if(!!el ){\n                            el.innerHTML = item.posts;\n                            el.dataset.disqusCount = item.posts;\n                        }\n                    });\n                }, function(){\n                    console.log('获取数据失败！')\n                }\n            );\n        }\n    };\n\n    // 热门评论\n    iDisqus.prototype.popular = function(){\n        var _ = this;\n        if(!!_.opts.popular){\n            getAjax(\n                _.opts.api + '/popular.php', \n                function(resp) {\n                    var data = JSON.parse(resp);\n                    if(data.code == 0){\n                        var posts = data.response;\n                        var postsHtml = '';\n                        posts.forEach(function(item){\n                            postsHtml += '<li><a href=\"' + item.link.replace(_.opts.site, '') + '\" title=\"' + item.title + '\">' + item.title + '</a></li>';\n                        });\n                        _.opts.popular.innerHTML = postsHtml;\n                    }\n                },function(){\n                    console.log('获取数据失败！')\n                }\n            );\n        }\n    }\n\n    // 获取评论列表\n    iDisqus.prototype.getlist = function(){\n        var _ = this;\n        _.stat.loading = true;\n        if (typeof DISQUS === 'object') {\n            return;\n        }\n        getAjax(\n            _.opts.api + '/getcomments.php?link=' + _.opts.url + (!!_.stat.next ? '&cursor=' + _.stat.next : ''),\n            function(resp){\n                var data = JSON.parse(resp);\n                if (data.code === 0) {\n                    _.stat.offsetTop = d.documentElement.scrollTop || d.body.scrollTop;\n                    _.stat.thread = data.thread;\n                    _.stat.count = data.posts;\n                    _.opts.avatar = data.forum.avatar;\n                    _.dom.querySelector('.comment-avatar-image').dataset.avatar = data.forum.avatar;\n                    if( _.user.logged_in == 'false' ){\n                        _.dom.querySelector('.comment-avatar-image').src = data.forum.avatar;\n                    }\n                    _.opts.badge =  data.forum.moderatorBadgeText;\n                    _.dom.querySelector('#idisqus').classList.remove('loading');\n                    _.dom.querySelector('#comment-link').href = data.link;\n                    _.dom.querySelector('#comment-count').innerHTML = _.stat.count + ' 条评论';\n                    var loadmore = _.dom.querySelector('.comment-loadmore');\n                    var posts = !!data.response ? data.response : [];\n                    _.stat.root = [];\n                    posts.forEach(function(item){\n                        _.load(item);\n                        if(!item.parent){\n                            _.stat.root.unshift(item.id);\n                        }\n                    });\n\n                    if ( data.cursor.hasPrev ){\n                        _.stat.root.forEach(function(item){\n                            _.dom.querySelector('.comment-list').appendChild(_.dom.querySelector('#comment-' + item));\n                        })\n                    } else {\n                        loadmore.addEventListener('click', _.handle.loadMore, false);\n                        _.addAllListeners();\n                    }\n                    if ( data.cursor.hasNext ){\n                        _.stat.next = data.cursor.next;\n                        loadmore.classList.remove('loading');\n                    } else {\n                        _.stat.next = null;\n                        loadmore.classList.add('hide');\n                    }\n                    if (posts.length == 0) {\n                        return;\n                    }\n\n                    window.scrollTo(0, _.stat.offsetTop);\n\n                    _.timeAgo();\n\n                    if (/^#disqus|^#comment-/.test(location.hash) && !data.cursor.hasPrev && !_.stat.disqusLoaded && !_.stat.loaded) {\n                        var el = _.dom.querySelector('#idisqus ' + location.hash)\n                        if( !!el ){\n                            window.scrollBy(0, el.getBoundingClientRect().top);\n                        }\n                    }\n                    _.stat.loading = false;\n                    _.stat.loaded = true;\n                } else if ( data.code === 2 ){\n                    _.create();\n                }\n            },function(){\n                alert('获取数据失败，请检查服务器设置。')\n            }\n        );\n    }\n\n    // 读取评论\n    iDisqus.prototype.load = function(post){\n\n        var _ = this;\n\n        var parentPostDom = _.dom.querySelector('.comment-item[data-id=\"'+post.parent+'\"]');\n\n        var user = {\n            username: post.username,\n            name: post.name,\n            avatar: post.avatar\n        }\n        if(!!post.username && _.stat.users.map(function(user) { return user.username; }).indexOf(post.username) == -1){\n            _.stat.users.push(user);\n        }\n        \n        var parentPost = !!post.parent ? {\n            name: '<a class=\"comment-item-pname\" href=\"#'+parentPostDom.id+'\"><svg class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"200\" height=\"200\"><path d=\"M1.664 902.144s97.92-557.888 596.352-557.888V129.728L1024 515.84l-425.984 360.448V628.8c-270.464 0-455.232 23.872-596.352 273.28\"></path></svg>' + parentPostDom.dataset.name + '</a>',\n            dom: parentPostDom.querySelector('.comment-item-children'),\n            insert: 'afterbegin'\n        } : {\n            name: '',\n            dom: _.dom.querySelector('.comment-list'),\n            insert: post.id == 'preview' || !!post.isPost ? 'afterbegin' : 'beforeend'\n        };\n\n        var mediaHTML = '';\n        if( post.media.length == 1 ){\n            mediaHTML = '<div class=\"comment-item-images\"><a class=\"comment-item-image\" target=\"_blank\" href=\"' + post.media[0] + '\" style=\"background-image: url('+post.media[0]+');width: 167px;height: 167px\"></a></div>';\n        } else if( post.media.length > 1 ){\n            post.media.forEach(function(item){\n                mediaHTML += '<a class=\"comment-item-image\" target=\"_blank\" href=\"' + item + '\" style=\"background-image: url('+item+')\"></a>';\n            })\n            mediaHTML = '<div class=\"comment-item-images\">' + mediaHTML + '</div>';\n        }\n\n        var html = '<li class=\"comment-item\" data-id=\"' + post.id + '\" data-name=\"'+ post.name + '\" id=\"comment-' + post.id + '\">' +\n            '<div class=\"comment-item-body\">'+\n            '<a class=\"comment-item-avatar\" href=\"#comment-'+post.id+'\"><img src=\"' + post.avatar + '\"></a>'+\n            '<div class=\"comment-item-main\">'+\n            '<div class=\"comment-item-header\"><a class=\"comment-item-name\" title=\"' + post.name + '\" rel=\"nofollow\" target=\"_blank\" href=\"' + ( post.url ? post.url : 'javascript:;' ) + '\">' + post.name + '</a>'+ (post.isMod ?'<span class=\"comment-item-badge\">'+_.opts.badge+'</span>' :'')+parentPost.name+'<span class=\"comment-item-bullet\"> • </span><time class=\"comment-item-time\" datetime=\"' + post.createdAt + '\"></time></div>'+\n            '<div class=\"comment-item-content\">' + post.message + mediaHTML + '</div>'+\n            '<div class=\"comment-item-footer\">' + (!!post.isPost ? '<span class=\"comment-item-manage\"><a class=\"comment-item-edit\" href=\"javascript:;\">编辑</a><span class=\"comment-item-bullet\"> • </span><a class=\"comment-item-delete\" href=\"javascript:;\">删除</a><span class=\"comment-item-bullet\"> • </span></span>' : '') + '<a class=\"comment-item-reply\" href=\"javascript:;\">回复</a> </div>'+\n            '</div></div>'+\n            '<ul class=\"comment-item-children\"></ul>'+\n            '</li>';\n\n        // 已删除评论\n        if(!!post.isDeleted){\n            html = '<li class=\"comment-item\" data-id=\"' + post.id + '\" id=\"comment-' + post.id + '\" data-name=\"已删除\">' +\n                '<div class=\"comment-item-body\">'+\n                '<a class=\"comment-item-avatar\" href=\"#comment-'+post.id+'\"><img src=\"' + post.avatar + '\"></a>'+\n                '<div class=\"comment-item-main\" data-message=\"此评论已被删除。\"></div></div>'+\n                '<ul class=\"comment-item-children\"></ul>'+\n                '</li>';\n        }\n\n\n        // 更新 or 创建\n        if(!!_.dom.querySelector('.comment-item[data-id=\"' + post.id + '\"]')){\n            _.dom.querySelector('.comment-item[data-id=\"' + post.id + '\"]').outerHTML = html;\n        } else {\n            parentPost.dom.insertAdjacentHTML(parentPost.insert, html);\n        }\n\n        if(!post.isDeleted){\n            _.dom.querySelector('.comment-item[data-id=\"' + post.id + '\"] .comment-item-reply').addEventListener('click', _.handle.show, false);\n            _.dom.querySelector('.comment-item[data-id=\"' + post.id + '\"] .comment-item-avatar').addEventListener('click', _.handle.jump, false);\n            if( !!post.parent ) {\n                _.dom.querySelector('.comment-item[data-id=\"' + post.id + '\"] .comment-item-pname').addEventListener('click', _.handle.jump, false);\n            }\n        }\n\n        // 发布留言，可编辑删除\n        if(!!post.isPost && !_.stat.editing){\n            var $this = _.dom.querySelector('.comment-item[data-id=\"' + post.id + '\"]');\n\n            var postEdit = setTimeout(function(){\n                // 十分钟后\n                if(!!$this.querySelector('.comment-item-manage')){\n                    $this.querySelector('.comment-item-manage').outerHTML = '';\n                }\n            }, 600000);\n\n            // 删除\n            $this.querySelector('.comment-item-delete').addEventListener('click',function(e){\n                var postData = {\n                    id: post.id\n                }\n                var delDom = e.currentTarget;\n                delDom.innerHTML = '删除中';\n                postAjax( _.opts.api + '/removecomment.php', postData, function(resp){\n                    var data = JSON.parse(resp);\n                    if (data.code === 0) {\n                        if(data.response.isDeleted == true){\n                            $this.outerHTML = '';\n                        } else {\n                            alert(data.response.message);\n                            $this.querySelector('.comment-item-manage').outerHTML = '';\n                        }\n                    } else if (data.code === 2) {\n                        alert(data.response);\n                        $this.querySelector('.comment-item-manage').outerHTML = '';\n                    }\n                }, function(){\n                    alert('删除出错，请稍后重试');\n                })\n                clearTimeout(postEdit);\n            }, false)\n\n            // 编辑\n            $this.querySelector('.comment-item-edit').addEventListener('click',function(){\n                _.stat.editing = post;\n                _.edit(post);\n            }, false)\n        }\n    }\n\n    // 读取更多\n    iDisqus.prototype.loadMore = function(e){\n        var _ = this;\n        _.stat.offsetTop = d.documentElement.scrollTop || d.body.scrollTop;\n        if( !_.stat.loading ){\n            e.currentTarget.classList.add('loading');\n            _.getlist();\n        }\n    }\n\n    // 评论框焦点\n    iDisqus.prototype.focus = function(e){\n        var wrapper = e.currentTarget.closest('.comment-form-wrapper');\n        wrapper.classList.add('editing');\n        if (wrapper.classList.contains('focus')){\n            wrapper.classList.remove('focus');\n        } else{\n            wrapper.classList.add('focus');\n        }\n    }\n\n    // 输入事件\n    iDisqus.prototype.input = function(e){\n        var form = e.currentTarget.closest('.comment-form');\n        var alertmsg = form.querySelector('.comment-form-alert');\n        alertmsg.innerHTML = '';\n    }\n\n    // 提醒用户 @ mention \n    iDisqus.prototype.mention = function(e){\n        var _ = this;\n        var textarea = e.currentTarget;\n        var selStart = textarea.selectionStart;\n        var mentionIndex = textarea.value.slice(0, selStart).lastIndexOf('@');\n        var mentionText = textarea.value.slice(mentionIndex, selStart);\n        var mentionDom = _.dom.querySelector('.mention-user');\n        if(mentionText.search(/^@\\w+$|^@$/) == 0){\n            if( e.keyCode == 38 || e.keyCode == 40){\n                return;\n            }\n            var showUsers = _.stat.users.filter(function(user){\n                var re = new RegExp(mentionText.slice(1), 'i');\n                return user.username.search(re) > -1;\n            });\n            var coord = _.getCaretCoord(textarea);\n            var list='', html = '';\n\n            if( showUsers.length > 0){\n                showUsers.forEach(function(item, i){\n                    list += '<li class=\"mention-user-item'+(i == 0 ? ' active' : '')+'\" data-username=\"'+item.username+'\"><img class=\"mention-user-avatar\" src=\"'+item.avatar+'\"><div class=\"mention-user-username\">'+item.username+'</div><div class=\"mention-user-name\">'+item.name+'</div></li>';\n                })\n                if(!!mentionDom){\n                    mentionDom.innerHTML = '<ul class=\"mention-user-list\">'+list+'</ul>';\n                    mentionDom.style.left = coord.left + 'px';\n                    mentionDom.style.top = coord.top + 'px';\n                } else {\n                    html = '<div class=\"mention-user\" style=\"left:'+coord.left+'px;top:'+coord.top+'px\"><ul class=\"mention-user-list\">'+list+'</ul></div>';\n                    _.dom.querySelector('#idisqus').insertAdjacentHTML('beforeend', html);\n                }\n\n                // 鼠标悬浮\n                _.addListener('mention-user-item', 'mouseover', function(){\n                    _.dom.querySelector('.mention-user-item.active').classList.remove('active');\n                    this.classList.add('active');\n                })\n\n                // 鼠标点击\n                _.addListener('mention-user-item', 'click', function(){\n                    var username = '@' + this.dataset.username + ' ';\n                    textarea.value = textarea.value.slice(0, mentionIndex) + username + textarea.value.slice(selStart);\n                    _.dom.querySelector('.mention-user').outerHTML = '';\n                    textarea.focus();\n                    textarea.setSelectionRange(mentionIndex + username.length, mentionIndex + username.length)\n                    textarea.removeEventListener('keydown', _.handle.keySelect, false);\n                })\n\n                // 键盘事件\n                textarea.addEventListener('keydown', _.handle.keySelect, false);\n            } else{\n                if(!!mentionDom){\n                    mentionDom.outerHTML = '';\n                    textarea.removeEventListener('keydown', _.handle.keySelect, false);\n                }\n            }\n        } else {\n            if(!!mentionDom){\n                mentionDom.outerHTML = '';\n                textarea.removeEventListener('keydown', _.handle.keySelect, false);\n            }\n        }\n    }\n\n    // 获取光标坐标 https://medium.com/@_jh3y/how-to-where-s-the-caret-getting-the-xy-position-of-the-caret-a24ba372990a\n    iDisqus.prototype.getCaretCoord = function(textarea){\n        var _ = this;\n        var carPos = textarea.selectionEnd,\n            div = d.createElement('div'),\n            span = d.createElement('span'),\n            copyStyle = getComputedStyle(textarea);\n        [].forEach.call(copyStyle, function(prop){\n            div.style[prop] = copyStyle[prop];\n        });\n        div.style.position = 'absolute';\n        _.dom.appendChild(div);\n        div.textContent = textarea.value.substr(0, carPos);\n        span.textContent = textarea.value.substr(carPos) || '.';\n        div.appendChild(span);\n        var coords = {\n            'top': textarea.offsetTop - textarea.scrollTop + span.offsetTop + parseFloat(copyStyle.lineHeight),\n            'left': textarea.offsetLeft - textarea.scrollLeft + span.offsetLeft\n        };\n        _.dom.removeChild(div);\n        return coords;\n    }\n\n    // 键盘选择用户\n    iDisqus.prototype.keySelect = function(e){\n        var _ = this;\n        var textarea = e.currentTarget;\n        var selStart = textarea.selectionStart;\n        var mentionIndex = textarea.value.slice(0, selStart).lastIndexOf('@');\n        var mentionText = textarea.value.slice(mentionIndex, selStart);\n        var mentionDom = _.dom.querySelector('.mention-user');\n        var current = _.dom.querySelector('.mention-user-item.active')\n        switch(e.keyCode){\n            case 13:\n                //回车\n                var username = '@' + current.dataset.username + ' ';\n                textarea.value = textarea.value.slice(0, mentionIndex) + username + textarea.value.slice(selStart);\n                textarea.setSelectionRange(mentionIndex + username.length, mentionIndex + username.length)\n                _.dom.querySelector('.mention-user').outerHTML = '';\n                textarea.removeEventListener('keydown', _.handle.keySelect, false);\n                e.preventDefault();\n                break;\n            case 38:\n                //上\n                if(!!current.previousSibling){\n                    current.previousSibling.classList.add('active');\n                    current.classList.remove('active');\n                }\n                e.preventDefault();\n                break;\n            case 40:\n                //下\n                if(!!current.nextSibling){\n                    current.nextSibling.classList.add('active');\n                    current.classList.remove('active');\n                }\n                e.preventDefault();\n                break;\n            default:\n                break;\n        }\n    }\n\n    // 跳到评论\n    iDisqus.prototype.jump = function(e){\n        var _ = this;\n        var $this = e.currentTarget;\n        var hash = getLocation($this.href).hash;\n        var el = _.dom.querySelector('#idisqus ' + hash);\n        history.replaceState(undefined, undefined, hash);\n        window.scrollBy(0, el.getBoundingClientRect().top);\n        e.preventDefault();\n    }\n\n    // 点选表情\n    iDisqus.prototype.field = function(e){\n        var item = e.currentTarget;\n        var form = item.closest('.comment-form');\n        var textarea = form.querySelector('.comment-form-textarea');\n        var selStart = textarea.selectionStart;\n        var shortCode = selStart == 0 ? item.dataset.code + ' ' : ' ' + item.dataset.code + ' '\n        textarea.value = textarea.value.slice(0, selStart) + shortCode + textarea.value.slice(selStart) \n        textarea.focus();\n        textarea.setSelectionRange(selStart + shortCode.length, selStart + shortCode.length);\n    }\n\n    // 显示回复框 or 取消回复框\n    iDisqus.prototype.show = function(e){\n        var _ = this;\n\n        var $this = e.currentTarget;\n        var item = $this.closest('.comment-item');\n\n        // 无论取消还是回复，移除已显示回复框\n        var box = _.dom.querySelector('.comment-item .comment-box:not([data-current-id])');\n        if( box ){\n            var $show = box.closest('.comment-item');\n            var cancel = $show.querySelector('.comment-item-cancel')\n            cancel.outerHTML = cancel.outerHTML.replace('cancel','reply');\n            box.outerHTML = '';\n        }\n\n        // 回复时，显示评论框\n        if( $this.className == 'comment-item-reply' ){\n            $this.outerHTML = $this.outerHTML.replace('reply','cancel');\n            var commentBox = _.box.replace(/emoji-input/g,'emoji-input-'+item.dataset.id).replace(/upload-input/g,'upload-input-'+item.dataset.id);\n            item.querySelector('.comment-item-children').insertAdjacentHTML('beforebegin', commentBox);\n            _.user.init();\n\n            _.addAllListeners();\n            item.querySelector('.comment-form-textarea').focus();\n        }\n\n        // 监听事件\n        _.addListener('comment-item-reply', 'click', _.handle.show);\n        _.addListener('comment-item-cancel', 'click', _.handle.show);\n\n    }\n\n    // 验证表单\n    iDisqus.prototype.verify = function(e){\n        var _ = this;\n        var box  = e.currentTarget.closest('.comment-box');\n        var avatar = box.querySelector('.comment-avatar-image');\n        var email = box.querySelector('.comment-form-email');\n        var alertmsg = box.querySelector('.comment-form-alert');\n        if(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(email.value)){\n            getAjax(\n                _.opts.api + '/getgravatar.php?email=' + email.value,\n                function(resp) {\n                    if (resp == 'false') {\n                        _.errorTips('您所填写的邮箱地址有误。', email);\n                    } else {\n                        avatar.src = resp;\n                    }\n                }, function(){\n                }\n            );\n        }\n    }\n\n    // 上传图片\n    iDisqus.prototype.upload = function(e){\n        var _ = this;\n        var file = e.currentTarget;\n        var form = file.closest('.comment-form');\n        var progress = form.querySelector('.comment-image-progress');\n        var loaded = form.querySelector('.comment-image-loaded');\n        var wrapper = form.querySelector('.comment-form-wrapper');\n        var alertmsg = form.querySelector('.comment-form-alert');\n        alertmsg.innerHTML = '';\n        if(file.files.length === 0){\n            return;\n        }\n\n        // 以文件大小识别是否为同张图片\n        var size = file.files[0].size;\n\n        if( size > 5000000 ){\n            alertmsg.innerHTML = '请选择 5M 以下图片。';\n            setTimeout(function(){\n                alertmsg.innerHTML = '';\n            }, 3000);\n            return;\n        }\n\n        if( _.stat.imageSize.indexOf(size) == -1 ){\n            progress.style.width = '80px';\n        } else {\n            alertmsg.innerHTML = '请勿选择已存在的图片。';\n            setTimeout(function(){\n                alertmsg.innerHTML = '';\n            }, 3000);\n            return;\n        }\n\n        // 展开图片上传界面\n        wrapper.classList.add('expanded');\n\n        // 图片上传请求\n        var data = new FormData();\n        data.append('file', file.files[0] );\n        var filename = file.files[0].name;\n\n        var $item;\n\n        var xhrUpload = new XMLHttpRequest();\n        xhrUpload.withCredentials = true;\n        xhrUpload.onreadystatechange = function(){\n            if(xhrUpload.readyState == 4 && xhrUpload.status == 200){\n                var data = JSON.parse(xhrUpload.responseText);\n                if( data.code == 0 ){\n                    _.stat.imageSize.push(size);\n                    var imageUrl = data.response[filename].url;\n                    var image = new Image();\n                    image.src = imageUrl;\n                    image.onload = function(){\n                        $item.innerHTML = '<img class=\"comment-image-object\" src=\"'+imageUrl+'\">';\n                        $item.dataset.imageUrl = imageUrl;\n                        $item.classList.remove('loading');\n                        $item.addEventListener('click', _.handle.remove, false);\n                    }\n                } else {\n                    alertmsg.innerHTML = '图片上传出错。';\n                    $item.innerHTML = '';\n                    if( !!form.getElementsByClassName('comment-image-item').length){\n                        wrapper.classList.remove('expanded');\n                    }\n                    setTimeout(function(){\n                        alertmsg.innerHTML = '';\n                    }, 3000);\n                }\n            }\n        };\n        xhrUpload.upload.addEventListener('progress', function(e){\n            loaded.style.width = Math.ceil((e.loaded/e.total) * 100)+ '%';\n        }, false);\n        xhrUpload.upload.addEventListener('load', function(e){\n            loaded.style.width = 0;\n            progress.style.width = 0;\n            var imageItem = '<li class=\"comment-image-item loading\" data-image-size=\"' + size + '\">\\n'+\n                '    <svg version=\"1.1\" class=\"comment-image-object\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"\\n'+\n                '        width=\"24px\" height=\"30px\" viewBox=\"0 0 24 30\" style=\"enable-background: new 0 0 50 50;\" xml:space=\"preserve\">\\n'+\n                '        <rect x=\"0\" y=\"10\" width=\"4\" height=\"10\" fill=\"rgba(127,145,158,1)\" opacity=\"0.2\">\\n'+\n                '            <animate attributeName=\"opacity\" attributeType=\"XML\" values=\"0.2; 1; .2\" begin=\"0s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\\n'+\n                '            <animate attributeName=\"height\" attributeType=\"XML\" values=\"10; 20; 10\" begin=\"0s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\\n'+\n                '            <animate attributeName=\"y\" attributeType=\"XML\" values=\"10; 5; 10\" begin=\"0s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\\n'+\n                '        </rect>\\n'+\n                '        <rect x=\"8\" y=\"10\" width=\"4\" height=\"10\" fill=\"rgba(127,145,158,1)\" opacity=\"0.2\">\\n'+\n                '            <animate attributeName=\"opacity\" attributeType=\"XML\" values=\"0.2; 1; .2\" begin=\"0.15s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\\n'+\n                '            <animate attributeName=\"height\" attributeType=\"XML\" values=\"10; 20; 10\" begin=\"0.15s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\\n'+\n                '            <animate attributeName=\"y\" attributeType=\"XML\" values=\"10; 5; 10\" begin=\"0.15s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\\n'+\n                '        </rect>\\n'+\n                '        <rect x=\"16\" y=\"10\" width=\"4\" height=\"10\" fill=\"rgba(127,145,158,1)\" opacity=\"0.2\">\\n'+\n                '            <animate attributeName=\"opacity\" attributeType=\"XML\" values=\"0.2; 1; .2\" begin=\"0.3s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\\n'+\n                '            <animate attributeName=\"height\" attributeType=\"XML\" values=\"10; 20; 10\" begin=\"0.3s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\\n'+\n                '            <animate attributeName=\"y\" attributeType=\"XML\" values=\"10; 5; 10\" begin=\"0.3s\" dur=\"0.6s\" repeatCount=\"indefinite\" />\\n'+\n                '        </rect>\\n'+\n                '    </svg>\\n'+\n                '</li>\\n';\n            form.querySelector('.comment-image-list').insertAdjacentHTML('beforeend', imageItem);\n            $item = form.querySelector('[data-image-size=\"'+size+'\"]');\n        }, false);\n        xhrUpload.open('POST', _.opts.api + '/upload.php', true);\n        xhrUpload.send(data);\n    }\n\n    // 移除图片\n    iDisqus.prototype.remove = function(e){\n        var _ = this;\n        var $item = e.currentTarget.closest('.comment-image-item');\n        var wrapper = e.currentTarget.closest('.comment-form-wrapper');\n        $item.outerHTML = '';\n        _.stat.imageSize = [];\n        var imageArr = wrapper.getElementsByClassName('comment-image-item');\n        [].forEach.call(imageArr, function(item, i){\n            _.stat.imageSize[i] = item.dataset.imageSize;\n        });\n        if(_.stat.imageSize.length == 0){\n            wrapper.classList.remove('expanded');\n        }\n        wrapper.querySelector('.comment-image-input').value = '';\n    }\n\n    // 错误提示\n    iDisqus.prototype.errorTips = function(Text, Dom){\n        var _ = this;\n        if( _.user.logged_in == 'true' ){\n            _.handle.logout();\n        }\n        var idisqus = _.dom.querySelector('#idisqus');\n        var errorDom = _.dom.querySelector('.comment-form-error');\n        if(!!errorDom){\n            errorDom.outerHTML = '';\n        }\n        var Top = Dom.offsetTop;\n        var Left = Dom.offsetLeft;\n        var errorHtml = '<div class=\"comment-form-error\" style=\"top:'+Top+'px;left:'+Left+'px;\">'+Text+'</div>';\n        idisqus.insertAdjacentHTML('beforeend', errorHtml);\n        setTimeout(function(){\n            var errorDom = _.dom.querySelector('.comment-form-error');\n            if(!!errorDom){\n                errorDom.outerHTML = '';\n            }\n        }, 3000);\n    }\n\n    // 发表/回复评论\n    iDisqus.prototype.post = function(e){\n        var _ = this;\n        var item =  e.currentTarget.closest('.comment-box[data-current-id]') || e.currentTarget.closest('.comment-item') || e.currentTarget.closest('.comment-box');\n        var message = item.querySelector('.comment-form-textarea').value;\n        var parentId = !!item.dataset.id ? item.dataset.id : '';\n        var imgArr = item.getElementsByClassName('comment-image-item');\n        var media = [];\n        var mediaStr = '';\n        [].forEach.call(imgArr, function(image,i){\n            media[i] = image.dataset.imageUrl;\n            mediaStr += ' ' + image.dataset.imageUrl;\n        });\n\n        // 不是编辑框需预览\n        if( !item.dataset.currentId ){\n            var elName = item.querySelector('.comment-form-name');\n            var elEmail = item.querySelector('.comment-form-email');\n            var elUrl = item.querySelector('.comment-form-url');\n            var user = {\n                name: elName.value,\n                email: elEmail.value,\n                url: elUrl.value.replace(/\\s/g,''),\n                avatar: item.querySelector('.comment-avatar-image').src,\n                type: 0\n            }\n            var alertmsg = item.querySelector('.comment-form-alert');\n            var alertClear = function() {\n                setTimeout(function(){\n                    alertmsg.innerHTML = '';\n                }, 3000);\n            }\n\n            if(_.user.type != '1'){\n                if(/^\\s*$/i.test(user.name)){\n                    _.errorTips('名字不能为空。', elName);\n                    return;\n                }\n                if(/^\\s*$/i.test(user.email)){\n                    _.errorTips('邮箱不能为空。', elEmail);\n                    return;\n                }\n                if(!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(user.email)){\n                    _.errorTips('请正确填写邮箱。', elEmail);\n                    return;\n                }\n                if(!/^([hH][tT]{2}[pP]:\\/\\/|[hH][tT]{2}[pP][sS]:\\/\\/)(([A-Za-z0-9-~]+)\\.)+([A-Za-z0-9-~\\/])+$|^\\s*$/i.test(user.url)){\n                    _.errorTips('请正确填写网址。', elUrl);\n                    return;\n                }\n                _.user.submit(user);\n\n                if( !_.user.name && !_.user.email ){\n                    return;\n                }\n            }\n\n            if(!_.stat.message && !_.stat.mediaHtml){\n                _.box = _.dom.querySelector('.comment-box').outerHTML.replace(/<label class=\"comment-actions-label exit\"(.|\\n)*<\\/label>\\n/,'').replace('comment-form-wrapper','comment-form-wrapper editing').replace(/加入讨论……/,'');\n            }\n\n            if( media.length == 0 && /^\\s*$/i.test(message)){\n                alertmsg.innerHTML = '评论不能为空或空格。';\n                item.querySelector('.comment-form-textarea').focus();\n                return;\n            };\n\n            var preMessage = message;\n\n            if( !!_.opts.emoji_preview ){\n                preMessage = preMessage.replace(/:([-+\\w]+):/g, function (match){\n                    var emojiShort = match.replace(/:/g,'');\n                    var emojiImage = !!_.eac[emojiShort] ? '<img class=\"emojione\" width=\"24\" height=\"24\" alt=\"'+emojiShort+'\" title=\":'+emojiShort+':\" src=\"'+_.opts.emojiPath +_.eac[emojiShort]+'.png\">' : match;\n                    return emojiImage;\n                });\n            } else {\n                _.emojiList.forEach(function(item){\n                    preMessage = preMessage.replace(':'+item.code+':', '<img class=\"emojione\" width=\"24\" height=\"24\" src=\"' + _.opts.emojiPath + item.unicode + '.png\" />');\n                });\n            }\n\n            var post = {\n                'url': !!_.user.url ? _.user.url : '',\n                'isMod': false,\n                'username': null,\n                'name': _.user.name,\n                'avatar': _.user.avatar,\n                'id': 'preview',\n                'parent': parentId,\n                'createdAt': (new Date()).toJSON(),\n                'message': '<p>' + preMessage + '</p>',\n                'media': media\n            };\n\n            _.load(post);\n\n            _.timeAgo();\n\n            // 清空或移除评论框\n            _.stat.message = message;\n            _.stat.mediaHtml = item.querySelector('.comment-image-list').innerHTML;\n\n            if( parentId ){\n                item.querySelector('.comment-item-cancel').click();\n            } else {\n                item.querySelector('.comment-form-textarea').value = '';\n                item.querySelector('.comment-image-list').innerHTML = '';\n                item.querySelector('.comment-form-wrapper').classList.remove('expanded','editing');\n            }\n        }\n\n        // @\n        var mentions = message.match(/@\\w+/g);\n        if( !!mentions ){\n            mentions = mentions.filter(function(mention) {\n                return _.stat.users.map(function(user) { return user.username; }).indexOf(mention.slice(1)) > -1;\n            });\n            if( mentions.length > 0 ){\n                var re = new RegExp('('+mentions.join('|')+')','g');\n                message = message.replace(re,'$1:disqus');\n            }\n        }\n\n        // 文本 + 图片\n        message += mediaStr;\n\n        // POST 操作\n        // 编辑框则更新评论\n        if( !!item.dataset.currentId ){\n            var postData = {\n                id: item.dataset.currentId,\n                message: message,\n            }\n            postAjax( _.opts.api + '/updatecomment.php', postData, function(resp){\n                var data = JSON.parse(resp);\n                if (data.code === 0) {\n                    _.stat.message = null;\n                    _.stat.mediaHtml = null;\n                    var post = data.response;\n                    _.load(post);\n                    _.timeAgo();\n                    _.stat.editing = false;\n                } else {\n                    // 取消编辑\n                    _.load(_.stat.editing)\n                    _.timeAgo();\n                    _.stat.editing = false;\n                }\n            }, function(){\n                // 取消编辑\n                _.load(_.stat.editing)\n                _.timeAgo();\n                _.stat.editing = false;\n            })\n        } else {\n            var postData = {\n                thread:  _.stat.thread,\n                parent: parentId,\n                message: message,\n                name: _.user.name,\n                email: _.user.email,\n                url:  _.user.url,\n            }\n            postAjax( _.opts.api + '/postcomment.php', postData, function(resp){\n                var data = JSON.parse(resp);\n                if (data.code === 0) {\n                    _.dom.querySelector('.comment-item[data-id=\"preview\"]').outerHTML = '';\n                    _.stat.count += 1;\n                    _.dom.querySelector('#comment-count').innerHTML = _.stat.count + ' 条评论';\n                    var post = data.response;\n                    post.isPost = true;\n                    _.load(post);\n                    _.timeAgo();\n                } else if (data.code === 2) {\n                    alertmsg.innerHTML = data.response;\n                    _.dom.querySelector('.comment-item[data-id=\"preview\"]').outerHTML = '';\n                    _.reEdit(item);\n\n                    if( data.response.indexOf('author') > -1){\n                        _.handle.logout();\n                    }\n                } else {\n                    alertmsg.innerHTML = '提交失败，请稍后重试，错误代码：' + data.code;\n                    alertClear();\n\n                    _.dom.querySelector('.comment-item[data-id=\"preview\"]').outerHTML = '';\n                    _.reEdit(item);\n                }\n\n            }, function(){\n                alertmsg.innerHTML = '提交出错，请稍后重试。';\n                alertClear();\n\n                _.dom.querySelector('.comment-item[data-id=\"preview\"]').outerHTML = '';\n                _.reEdit(item);\n            })\n        }\n    }\n\n    // 重新编辑\n    iDisqus.prototype.reEdit = function(item){\n        var _ = this;\n\n        if( !!item.dataset.id ){\n            item.querySelector('.comment-item-reply').click();\n        } else {\n            item.querySelector('.comment-form-wrapper').classList.add('editing');\n        }\n\n        // 重新填充文本图片\n        if(!!_.stat.message){\n            item.querySelector('.comment-form-textarea').value = _.stat.message;\n        }\n        if(!!_.stat.mediaHtml){\n            item.querySelector('.comment-form-wrapper').classList.add('expanded');\n            item.querySelector('.comment-image-list').innerHTML = _.stat.mediaHtml;\n            _.addListener('comment-image-item', 'click', _.handle.remove);\n        }\n    }\n\n    // 编辑\n    iDisqus.prototype.edit = function(post){\n        var _ = this;\n        var commentBox = _.box.replace('comment-box','comment-box comment-box-'+post.id).replace(/emoji-input/g,'emoji-input-'+post.id).replace(/upload-input/g,'upload-input-'+ post.id);\n        var $this = _.dom.querySelector('.comment-item[data-id=\"' + post.id + '\"] .comment-item-body');\n        $this.outerHTML = commentBox;\n        _.user.init();\n        var item = _.dom.querySelector('.comment-box-' + post.id);\n        item.dataset.currentId = post.id;\n        _.addAllListeners();\n        item.querySelector('.comment-form-textarea').focus();\n\n        // 取消编辑\n        item.querySelector('.comment-actions-form').insertAdjacentHTML('afterbegin', '<a class=\"comment-form-cancel\" href=\"javascript:;\">取消</a>')\n        item.querySelector('.comment-form-cancel').addEventListener('click', function(){\n            _.stat.editing = false;\n            _.load(post);\n            _.timeAgo();\n        }, false);\n\n        // 重新填充文本图片，连续回复、连续编辑会有 bug\n        if(!!_.stat.message){\n            item.querySelector('.comment-form-textarea').value = _.stat.message;\n        }\n        if(!!_.stat.mediaHtml){\n            item.querySelector('.comment-form-wrapper').classList.add('expanded');\n            item.querySelector('.comment-image-list').innerHTML = _.stat.mediaHtml;\n            _.addListener('comment-image-item', 'click', _.handle.remove);\n        }\n\n    }\n\n    // 创建 Thread 表单\n    iDisqus.prototype.create = function(){\n        var _ = this;\n        if(_.opts.autoCreate){\n            _.dom.querySelector('.loading-container').dataset.tip = '正在创建 Thread……';\n            var postData = {\n                url: _.opts.link,\n                identifier: _.opts.identifier,\n                title: _.opts.title,\n                slug: _.opts.slug,\n                message: _.opts.desc\n            }\n            _.postThread(postData);\n            return;\n        }\n        _.dom.querySelector('#idisqus').classList.remove('loading');\n        _.dom.querySelector('#idisqus').innerHTML  = '<div class=\"comment-header\"><span class=\"comment-header-item\">创建 Thread<\\/span><\\/div>'+\n            '<div class=\"comment-thread-form\">'+\n            '<p>由于 Disqus 没有本页面的相关 Thread，故需先创建 Thread<\\/p>'+\n            '<div class=\"comment-form-item\"><label class=\"comment-form-label\">url:<\\/label><input class=\"comment-form-input\" id=\"thread-url\" name=\"url\" value=\"' + _.opts.link + '\" disabled \\/><\\/div>'+\n            '<div class=\"comment-form-item\"><label class=\"comment-form-label\">identifier:<\\/label><input class=\"comment-form-input\" id=\"thread-identifier\" name=\"identifier\" value=\"'+_.opts.identifier+'\" disabled \\/><\\/div>'+\n            '<div class=\"comment-form-item\"><label class=\"comment-form-label\">title:<\\/label><input class=\"comment-form-input\" id=\"thread-title\" name=\"title\" value=\"'+_.opts.title+'\" disabled \\/><\\/div>'+\n            '<div class=\"comment-form-item\"><label class=\"comment-form-label\">slug:<\\/label><input class=\"comment-form-input\" id=\"thread-slug\" name=\"slug\" value=\"' + _.opts.slug + '\" \\/><\\/div>'+\n            '<div class=\"comment-form-item\"><label class=\"comment-form-label\">message:<\\/label><textarea class=\"comment-form-textarea\" id=\"thread-message\" name=\"message\">'+_.opts.desc+'<\\/textarea><\\/div>'+\n            '<button id=\"thread-submit\" class=\"comment-form-submit\">提交<\\/button><\\/div>';\n        _.dom.querySelector('#thread-submit').addEventListener('click', _.handle.postThread, false);\n    }\n\n    // 创建 Thread 事件\n    iDisqus.prototype.postThread = function(){\n        var _ = this;\n        if( !!arguments[0].target ){\n            var postData = {\n                url: _.dom.querySelector('#thread-url').value,\n                identifier: _.dom.querySelector('#thread-identifier').value,\n                title: _.dom.querySelector('#thread-title').value,\n                slug: _.dom.querySelector('#thread-slug').value.replace(/[^A-Za-z0-9_-]+/g,''),\n                message: _.dom.querySelector('#thread-message').value\n            }\n        } else {\n            var postData = arguments[0];\n        }\n        postAjax( _.opts.api + '/createthread.php', postData, function(resp){\n            var data = JSON.parse(resp);\n            if( data.code === 0 ) {\n                alert('创建 Thread 成功，刷新后便可愉快地评论了！');\n                setTimeout(function(){location.reload();},2000);\n            } else if( data.code === 2 ) {\n                if (data.response.indexOf('A thread already exists with link') > -1) {\n                    alert(data.response.replace('A thread already exists with link,', '已存在此链接的相关 Thread，'));\n                    return;\n                }\n                if (data.response.indexOf('Invalid URL') > -1) {\n                    alert('参数错误，无效的\\'URL\\'');\n                    return;\n                }\n                if (data.response.indexOf('Invalid slug') > -1) {\n                    alert('参数错误，无效的\\'slug\\'');\n                    return;\n                }\n                alert(data.response);\n                return;\n            } else { \n                alert(data.response);\n                return;\n            }\n        }, function(){\n            alert('创建 Thread 出错，请稍后重试！');\n        })\n    }\n\n    // 销毁评论框\n    iDisqus.prototype.destroy = function(){\n        var _ = this;\n        _.removeListener('exit', 'click', _.handle.logout);\n        _.removeListener('comment-form-textarea', 'blur', _.handle.focus);\n        _.removeListener('comment-form-textarea', 'focus', _.handle.focus);\n        _.removeListener('comment-form-textarea', 'keyup', _.handle.mention);\n        _.removeListener('comment-form-email', 'blur', _.handle.verify);\n        _.removeListener('comment-form-submit', 'click', _.handle.post);\n        _.removeListener('comment-image-input', 'change', _.handle.upload);\n        _.removeListener('comment-item-reply', 'click', _.handle.show);\n        _.removeListener('comment-loadmore', 'click', _.handle.loadMore);\n        _.removeListener('emojione-item', 'click', _.handle.field);\n        _.dom.innerHTML = '';\n        delete _.box;\n        delete _.dom;\n        delete _.emojiList;\n        delete _.user;\n        delete _.handle;\n        delete _.opts;\n        delete _.stat;\n    }\n\n    // reset DISQUS on AJAX sites\n    iDisqus.prototype.reset = function() {\n        var _ = this;\n        DISQUS.reset({\n            reload: true,\n            config: function () {\n                this.page.identifier = location.pathname;\n                this.page.url = _.opts.site + location.pathname;\n            }\n        })\n    }\n\n    /* CommonJS */\n    if (typeof require === 'function' && typeof module === 'object' && module && typeof exports === 'object' && exports)\n        module.exports = iDisqus;\n    /* AMD */\n    else if (typeof define === 'function' && define['amd'])\n        define(function () {\n            return iDisqus;\n        });\n    /* Global */\n    else\n        global['iDisqus'] = global['iDisqus'] || iDisqus;\n\n})(window || this);\n","require('./src/iDisqus.scss');\r\nmodule.exports = require('./src/iDisqus.js');\r\n"],"sourceRoot":""}